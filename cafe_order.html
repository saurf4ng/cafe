<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카페 주문 시스템</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; text-align: center; }
        .menu-item { border: 1px solid #ddd; padding: 10px; margin: 10px; display: flex; align-items: center; justify-content: space-between; }
        .menu-item label { margin-left: 10px; }
        #orders { margin-top: 20px; border-top: 2px solid #000; padding-top: 10px; text-align: left; }
        button { padding: 8px 12px; cursor: pointer; }
        #reset-btn { background-color: red; color: white; }
        .option-input { width: 150px; margin-left: 10px; }
        .order-header { display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>

    <h1>카페 주문 시스템</h1>
    
    <h2>카테고리 선택</h2>
    <select id="category-select" style="font-size: 1.2em; padding: 10px; width: 250px;" onchange="loadMenu()">
        <option value="">카테고리를 선택하세요</option>
        <option value="커피">커피</option>
        <option value="주스">주스</option>
        <option value="에이드">에이드</option>
        <option value="라떼">라떼</option>
        <option value="쉐이크">쉐이크</option>
        <option value="스무디">스무디</option>
        <option value="차">차</option>
    </select>

    <h2>메뉴</h2>
    <div id="menu-list"></div>

    <div id="orders">
        <div class="order-header">
            <h2>주문 내역</h2>
            <button id="reset-btn" onclick="resetData()">리셋</button>
        </div>
        <ul id="order-list"></ul>
    </div>

    <script>
        function resetData() {
            if (confirm("모든 주문 내역을 초기화하시겠습니까?")) {
                localStorage.removeItem("orders");
                document.getElementById("order-list").innerHTML = "";
                alert("모든 주문이 초기화되었습니다.");
            }
        }

        const menu = [
            { category: "커피", name: "에스프레소" },
            { category: "커피", name: "아메리카노" },
            { category: "커피", name: "카푸치노" },
            { category: "커피", name: "카페라떼" },
            { category: "커피", name: "카라멜라떼" },
            { category: "커피", name: "바닐라라떼" },
            { category: "커피", name: "모카라떼" },
            { category: "커피", name: "연유라떼" },
            { category: "커피", name: "솔티크림라떼" },
            { category: "커피", name: "콜드브루" },
            { category: "커피", name: "코드브루라떼" },

            { category: "주스", name: "딸기주스" },
            { category: "주스", name: "키위주스" },
            { category: "주스", name: "바나나주스" },
            { category: "주스", name: "망고주스" },
            { category: "주스", name: "토마토주스" },
            { category: "주스", name: "딸바주스" },
            { category: "주스", name: "키바주스" },
            { category: "주스", name: "착즙주스" },

            { category: "에이드", name: "자몽에이드" },
            { category: "에이드", name: "레몬에이드" },
            { category: "에이드", name: "오렌지에이드" },
            { category: "에이드", name: "블루베리에이드" },
            { category: "에이드", name: "오몽에이드" },
            { category: "에이드", name: "복숭아에이드" },

            { category: "라떼", name: "초코라떼" },
            { category: "라떼", name: "말차라떼" },
            { category: "라떼", name: "홍차라떼" },
            { category: "라떼", name: "고구마라떼" },
            { category: "라떼", name: "진저라떼" },
            { category: "라떼", name: "블루베리라떼" },
            { category: "라떼", name: "초당옥수수라떼" },

            { category: "쉐이크", name: "바닐라쉐이크" },
            { category: "쉐이크", name: "딸기쉐이크" },
            { category: "쉐이크", name: "자바칩프라페" },
            { category: "쉐이크", name: "호두쉐이크" },
            { category: "쉐이크", name: "죠리퐁쉐이크" },

            { category: "스무디", name: "플레인요거트스무디" },
            { category: "스무디", name: "딸기요거트스무디" },
            { category: "스무디", name: "블루베리요거트스무디" },
            { category: "스무디", name: "망고요거트스무디" },
            { category: "스무디", name: "청포도요거트스무디" },
            { category: "스무디", name: "화이트피치요거트스무디" },

            { category: "차", name: "레몬차" },
            { category: "차", name: "자몽차" },
            { category: "차", name: "오렌지차" },
            { category: "차", name: "유자차" },
            { category: "차", name: "대추차" },
            { category: "차", name: "생강차" },
            { category: "차", name: "레몬진저티" },
            { category: "차", name: "캐모마일" },
            { category: "차", name: "히비스커스" },
            { category: "차", name: "페퍼민트" },
            { category: "차", name: "얼그레이" },
            { category: "차", name: "설녹차" },
            { category: "차", name: "복숭아티" }

        ];

        function loadMenu() {
            const selectedCategory = document.getElementById("category-select").value;
            const menuList = document.getElementById("menu-list");
            menuList.innerHTML = "";

            if (!selectedCategory) return;

            menu.filter(item => item.category === selectedCategory).forEach(item => {
                const div = document.createElement("div");
                div.className = "menu-item";

                const title = document.createElement("span");
                title.textContent = item.name;
                div.appendChild(title);

                // HOT / COLD 선택
                const hotLabel = document.createElement("label");
                const hotInput = document.createElement("input");
                hotInput.type = "radio";
                hotInput.name = `temp-${item.name}`;
                hotInput.value = "HOT";
                hotInput.checked = true;
                hotLabel.appendChild(hotInput);
                hotLabel.appendChild(document.createTextNode(" HOT"));

                const coldLabel = document.createElement("label");
                const coldInput = document.createElement("input");
                coldInput.type = "radio";
                coldInput.name = `temp-${item.name}`;
                coldInput.value = "COLD";
                coldLabel.appendChild(coldInput);
                coldLabel.appendChild(document.createTextNode(" COLD"));

                div.appendChild(hotLabel);
                div.appendChild(coldLabel);

                // 추가 옵션 입력
                const optionInput = document.createElement("input");
                optionInput.type = "text";
                optionInput.placeholder = "추가 옵션 입력";
                optionInput.className = "option-input";
                optionInput.id = `option-${item.name}`;
                div.appendChild(optionInput);

                // 주문 버튼
                const orderButton = document.createElement("button");
                orderButton.textContent = "주문";
                orderButton.onclick = () => placeOrder(item.name);
                div.appendChild(orderButton);

                menuList.appendChild(div);
            });
        }

        function placeOrder(name) {
            const temp = document.querySelector(`input[name="temp-${name}"]:checked`).value;
            const option = document.getElementById(`option-${name}`).value.trim() || "옵션 없음";

            let orders = JSON.parse(localStorage.getItem("orders")) || [];

            // 주문 내역에서 동일한 항목과 합산
            let existingOrderItem = orders.find(order => 
                order.name === name &&
                order.temp === temp &&
                order.option === option
            );

            if (existingOrderItem) {
                existingOrderItem.count++;
            } else {
                orders.push({ name, temp, option, count: 1 });
            }

            localStorage.setItem("orders", JSON.stringify(orders));

            alert("주문이 완료되었습니다!");
            loadOrders();
        }

        function loadOrders() {
            const orders = JSON.parse(localStorage.getItem("orders")) || [];
            const orderList = document.getElementById("order-list");
            orderList.innerHTML = "";

            orders.forEach(order => {
                const li = document.createElement("li");
                li.textContent = `${order.name} (${order.temp}) - 옵션: ${order.option} x${order.count}`;
                orderList.appendChild(li);
            });
        }	


        document.addEventListener("DOMContentLoaded", () => {
            loadOrders();
        });
    </script>
</body>
</html>
